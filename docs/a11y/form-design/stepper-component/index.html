<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
	<meta name="robots" content="noindex, nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stepper Component | Form Design</title>
</head>
<body>
	<main>
		<form action="#">
			<label for="num1">商品1の数量（0〜9）</label>
			<input type="number" name="num1" id="num1" min="0" max="9" step="1" value="0">
			<small>ブラウザに搭載されているスピンボタンは小さく、操作しにくいことが多い</small>
		</form>
		<hr>
		<form action="#">
			<label for="num2" class="num2-label" id="num2-label">商品2の数量（0〜9）</label>
			<div class="num2-component">
				<button type="button" id="num2-minus" aria-label="減らす" aria-describedby="num2-label">-</button>
				<input type="number" name="num2" id="num2" min="0" max="9" step="1" value="0">
				<button type="button" id="num2-plus" aria-label="増やす" aria-describedby="num2-label">+</button>
			</div>
			<span class="visually-hidden" id="num2-status" role="status" aria-live="polite">0</span>
		</form>
		<script>
			// TODO: span 要素の代替を検証（aria-controls, inputへのaria-live 付与、など）
			const num2Input = document.querySelector('#num2');
			const num2BtnMinus = document.querySelector('#num2-minus');
			const num2BtnPlus = document.querySelector('#num2-plus');
			const num2Status = document.querySelector('#num2-status');
			function num2RefreshStatus(){
				num2Status.textContent = num2Input.value;
			}
			num2Input.addEventListener('input', (e) =>{
				num2RefreshStatus();
			})
			num2BtnMinus.addEventListener('click', ()=>{
				if(num2Input.value > num2Input.min){
					num2Input.stepDown();
					num2RefreshStatus();
				}
			})
			num2BtnPlus.addEventListener('click', ()=>{
				if(num2Input.value < num2Input.max){
					num2Input.stepUp();
					num2RefreshStatus();
				}
			})
		</script>
		<style>
			.visually-hidden {
				position: absolute !important;
				clip: rect(0 0 0 0) !important;
				clip-path: inset(100%) !important;
				width :1px !important;
				height: 1px !important;
				margin: -1px !important;
				overflow: hidden !important;
				padding: 0 !important;
				border: 0 !important;
			}
			.num2-label {
				display: block;
			}
			.num2-component {
				display: flex;
				flex-flow: row nowrap;
			}
			.num2-component > input::-webkit-outer-spin-button,
			.num2-component > input::-webkit-inner-spin-button {
				appearance: none;
				margin: 0;
			}
			.num2-component > input {
				border-radius: 0;
				border: 1px solid black;
			}
			.num2-component > button {
				appearance: none;
				margin: 0;
				background-color: none;
				border: 1px solid black;
				padding: 4px;
			}
			#num2-minus {
				display: flexbox;
				border-radius: 4px 0 0 4px;
			}
			#num2-plus {
				display: flexbox;
				border-radius: 0 4px 4px 0;
			}
		</style>
	</main>
	<nav>
		<a href="../index.html">まとめページに戻る</a>
	</nav>
</body>
</html>
